name: Send SMS on failure
run-name: ${{ github.actor }} wants to sent an SMS
on: [push]
env:
  TOKEN: ${{ secrets.SMS_TOKEN }}
  FROM: ${{ secrets.SMS_FROM }}
  TO: ${{ secrets.SMS_TO }}
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - name: Explicitly fail this job
        run: exit -1
      - name: send sms if failed
        if: failure()
        run: |
          curl --verbose https://api.telekom.com/service/sms/v1/messages -H "x-api-token: $SMS_TOKEN" -d "From=$FROM&To=$TO&Body=Build%20failed."
      - name: report success
        if: success()
        run: echo "ðŸŽ‰ success"
